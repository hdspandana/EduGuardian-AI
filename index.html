<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduGuardian AI - Learn Smarter. Stay Safe. Thrive Academically.</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #1e40af;
            --primary-green: #16a34a;
            --secondary-blue: #3b82f6;
            --light-blue: #eff6ff;
            --dark-text: #1e293b;
            --gray-text: #64748b;
            --white: #ffffff;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            overflow-x: hidden;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark-text);
            transition: color 0.3s;
            cursor: pointer;
        }

        .nav-links a:hover {
            color: var(--primary-blue);
        }

        .nav-cta {
            display: flex;
            gap: 1rem;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-text);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
        }

        .btn-secondary:hover {
            background: var(--primary-blue);
            color: white;
        }

        /* Hero Section */
        .hero {
            margin-top: 80px;
            padding: 4rem 2rem;
            min-height: 90vh;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, var(--light-blue) 0%, rgba(255,255,255,0) 100%);
        }

        .hero-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            line-height: 1.2;
            margin-bottom: 1rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-content p {
            font-size: 1.25rem;
            color: var(--gray-text);
            margin-bottom: 2rem;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .trust-badges {
            display: flex;
            gap: 2rem;
            align-items: center;
            margin-top: 2rem;
        }

        .badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--gray-text);
        }

        .hero-visual {
            position: relative;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .dashboard-preview {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            padding: 1rem;
            position: relative;
        }

        .dashboard-header {
            background: var(--gradient);
            color: white;
            padding: 1rem;
            border-radius: 8px 8px 0 0;
            margin: -1rem -1rem 1rem -1rem;
        }

        .metric-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .metric-card {
            background: var(--light-blue);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-blue);
        }

        .metric-label {
            font-size: 0.875rem;
            color: var(--gray-text);
        }

        /* Features Section */
        .features {
            padding: 4rem 2rem;
            background: white;
        }

        .section-header {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 3rem;
        }

        .section-header h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--dark-text);
        }

        .section-header p {
            font-size: 1.125rem;
            color: var(--gray-text);
        }

        .features-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: var(--light-blue);
            padding: 2rem;
            border-radius: 16px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            color: var(--dark-text);
        }

        .feature-description {
            color: var(--gray-text);
        }

        .feature-tag {
            display: inline-block;
            background: var(--primary-green);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            margin-top: 1rem;
        }

        /* Live Tools Section */
        .tools-section {
            padding: 4rem 2rem;
            background: linear-gradient(135deg, var(--light-blue) 0%, white 100%);
        }

        .tools-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .tool-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            transition: all 0.3s;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        /* Checker/Tool Container */
        .checker-container {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-top: 2rem;
        }

        .text-input {
            width: 100%;
            min-height: 200px;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .result-box {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border-radius: 8px;
            display: none;
        }

        .result-box.show {
            display: block;
        }

        .result-box.clean {
            background: #dcfce7;
            border-left: 4px solid var(--primary-green);
        }

        .result-box.warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
        }

        .result-box.danger {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient);
            width: 0%;
            transition: width 0.3s;
        }

        /* Study Timer */
        .timer-display {
            font-size: 4rem;
            font-weight: bold;
            text-align: center;
            color: var(--primary-blue);
            margin: 2rem 0;
            font-variant-numeric: tabular-nums;
        }

        .timer-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-card {
            background: var(--light-blue);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-blue);
        }

        .stat-label {
            color: var(--gray-text);
            margin-top: 0.5rem;
        }

        /* Pricing */
        .pricing {
            padding: 4rem 2rem;
            background: white;
        }

        .pricing-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .pricing-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }

        .pricing-card.featured {
            border-color: var(--primary-blue);
            box-shadow: 0 10px 40px rgba(30, 64, 175, 0.1);
            transform: scale(1.05);
        }

        .pricing-card.featured::before {
            content: "MOST POPULAR";
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary-blue);
            color: white;
            padding: 0.25rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .price {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin: 1rem 0;
        }

        .price span {
            font-size: 1rem;
            color: var(--gray-text);
        }

        .pricing-features {
            list-style: none;
            margin: 2rem 0;
        }

        .pricing-features li {
            padding: 0.5rem 0;
            color: var(--gray-text);
        }

        .pricing-features li::before {
            content: "‚úì";
            color: var(--primary-green);
            font-weight: bold;
            margin-right: 0.5rem;
        }

        /* Footer */
        footer {
            background: var(--dark-text);
            color: white;
            padding: 3rem 2rem 1rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links a {
            color: #94a3b8;
            text-decoration: none;
            transition: color 0.3s;
            cursor: pointer;
        }

        .footer-links a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #334155;
            color: #94a3b8;
        }

        /* AI Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 9999;
        }

        .chat-button {
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            position: relative;
        }

        .chat-button:hover {
            transform: scale(1.1);
        }

        .badge-notification {
            position: absolute;
            top: 0;
            right: 0;
            background: #ef4444;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 380px;
            height: 600px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.3s;
        }

        .chat-window.active {
            display: flex;
        }

        .chat-header {
            background: var(--gradient);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .chat-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .chat-close:hover {
            background: rgba(255,255,255,0.2);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background: #f8fafc;
        }

        .chat-message {
            margin-bottom: 1rem;
            display: flex;
            gap: 0.75rem;
            animation: fadeIn 0.3s;
        }

        .chat-message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .chat-message.user .message-avatar {
            background: var(--primary-blue);
        }

        .message-content {
            max-width: 75%;
        }

        .message-bubble {
            background: white;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .chat-message.user .message-bubble {
            background: var(--gradient);
            color: white;
        }

        .message-time {
            font-size: 0.75rem;
            color: var(--gray-text);
            margin-top: 0.25rem;
            padding: 0 0.5rem;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: white;
            border-radius: 12px;
            width: fit-content;
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--gray-text);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .chat-input-area {
            padding: 1rem 1.5rem;
            background: white;
            border-top: 1px solid #e5e7eb;
        }

        .chat-quick-replies {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
        }

        .quick-reply {
            background: var(--light-blue);
            color: var(--primary-blue);
            border: none;
            padding: 0.5rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-reply:hover {
            background: var(--primary-blue);
            color: white;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 0.5rem;
        }

        .chat-input {
            flex: 1;
            border: 2px solid #e5e7eb;
            border-radius: 24px;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: var(--primary-blue);
        }

        .chat-send {
            background: var(--gradient);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .chat-send:hover {
            transform: scale(1.1);
        }

        .chat-send:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-text);
        }

        .modal-close:hover {
            color: var(--dark-text);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark-text);
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 2rem;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: none;
            align-items: center;
            gap: 1rem;
            z-index: 10001;
            animation: slideIn 0.3s;
        }

        .notification.active {
            display: flex;
        }

        .notification.success {
            border-left: 4px solid var(--primary-green);
        }

        .notification.error {
            border-left: 4px solid #ef4444;
        }

        .notification.warning {
            border-left: 4px solid #f59e0b;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Utility Classes */
        .highlight {
            background: yellow;
            padding: 0 4px;
            border-radius: 2px;
        }

        .url-item {
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: #fee2e2;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .blocked-badge {
            background: #ef4444;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
        }

        /* Alert Banner */
        .alert-banner {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            color: white;
            padding: 0.75rem;
            text-align: center;
            font-weight: 500;
        }

        .live-demo {
            background: var(--primary-green);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: 1rem;
            transition: all 0.3s;
            cursor: pointer;
        }

        .live-demo:hover {
            transform: scale(1.05);
        }

        .pulse {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links,
            .nav-cta {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero-container {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .hero-buttons {
                flex-direction: column;
            }

            .pricing-card.featured {
                transform: none;
            }

            .metric-cards {
                grid-template-columns: 1fr;
            }

            .chat-window {
                width: 100vw;
                height: 100vh;
                bottom: 0;
                right: 0;
                border-radius: 0;
            }

            .chat-widget {
                bottom: 1rem;
                right: 1rem;
            }
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.6s forwards;
        }
    </style>
</head>
<body>
    <!-- Alert Banner -->
    <div class="alert-banner">
        üéì NEW: Try our AI-powered plagiarism checker and study assistant - 100% FREE!
        <a class="live-demo" onclick="openTool('plagiarism')">
            <span class="pulse"></span>
            Try Now
        </a>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo" onclick="scrollToTop()">
                üõ°Ô∏è EduGuardian AI
            </div>
            <ul class="nav-links">
                <li><a onclick="scrollToSection('features')">Features</a></li>
                <li><a onclick="scrollToSection('tools')">Try Tools</a></li>
                <li><a onclick="scrollToSection('pricing')">Pricing</a></li>
                <li><a onclick="openModal('contact')">Contact</a></li>
            </ul>
            <div class="nav-cta">
                <a class="btn btn-secondary" onclick="openModal('login')">Login</a>
                <a class="btn btn-primary" onclick="openModal('signup')">Start Free Trial</a>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content fade-in">
                <h1>AI That Actually Protects & Helps Students</h1>
                <p>Real plagiarism detection, productivity tracking, and AI study assistance - working right now.</p>
                <div class="hero-buttons">
                    <a class="btn btn-primary" onclick="openTool('plagiarism')">Check for Plagiarism</a>
                    <a class="btn btn-secondary" onclick="toggleChat()">Ask AI Tutor</a>
                </div>
                <div class="trust-badges">
                    <div class="badge">
                        <span>‚úì</span> FERPA Compliant
                    </div>
                    <div class="badge">
                        <span>‚úì</span> GDPR Ready
                    </div>
                    <div class="badge">
                        <span>‚úì</span> SOC 2 Certified
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="dashboard-preview">
                    <div class="dashboard-header">
                        <h3>üìä Real-Time Dashboard</h3>
                    </div>
                    <div class="metric-cards">
                        <div class="metric-card">
                            <div class="metric-value" id="safeBrowsingMetric">98%</div>
                            <div class="metric-label">Safe Browsing</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="cheatingMetric">73%</div>
                            <div class="metric-label">Less Cheating</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">4.8/5</div>
                            <div class="metric-label">Student Rating</div>
                        </div>
                    </div>
                    <div style="background: #f1f5f9; padding: 1rem; border-radius: 8px;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
                            <span style="background: #ef4444; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">ALERT</span>
                            <span style="color: #64748b;">Potential plagiarism detected in Assignment #3</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <span style="background: #f59e0b; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">WARNING</span>
                            <span style="color: #64748b;">3 students showing signs of burnout</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="section-header">
            <h2>How EduGuardian AI Empowers You</h2>
            <p>Advanced AI technology that protects and supports your educational journey</p>
        </div>
        <div class="features-grid">
            <div class="feature-card" onclick="toggleChat()">
                <div class="feature-icon">üîç</div>
                <h3 class="feature-title">AI Study Mentor</h3>
                <p class="feature-description">Get personalized study plans, weak spot analysis, and burnout alerts tailored to your learning style.</p>
                <span class="feature-tag">For Students</span>
            </div>
            <div class="feature-card" onclick="openTool('blocker')">
                <div class="feature-icon">üõ°Ô∏è</div>
                <h3 class="feature-title">Safe Learning Environment</h3>
                <p class="feature-description">Blocks scams, phishing sites, and cheating resources in real-time to keep you focused.</p>
                <span class="feature-tag">For Students</span>
            </div>
            <div class="feature-card" onclick="openTool('timer')">
                <div class="feature-icon">‚è≥</div>
                <h3 class="feature-title">Productivity Guardian</h3>
                <p class="feature-description">Track focus time and avoid burnout with smart break recommendations.</p>
                <span class="feature-tag">For Students</span>
            </div>
            <div class="feature-card" onclick="openTool('plagiarism')">
                <div class="feature-icon">üö©</div>
                <h3 class="feature-title">Cheating Detection</h3>
                <p class="feature-description">Advanced AI flags copied code, plagiarism, and suspicious browsing patterns.</p>
                <span class="feature-tag">For Educators</span>
            </div>
            <div class="feature-card" onclick="showNotification('Full dashboard coming in Pro version!', 'success')">
                <div class="feature-icon">üìä</div>
                <h3 class="feature-title">Student Wellness Dashboard</h3>
                <p class="feature-description">Spot at-risk students before they fail with predictive analytics.</p>
                <span class="feature-tag">For Educators</span>
            </div>
            <div class="feature-card" onclick="openTool('blocker')">
                <div class="feature-icon">üåê</div>
                <h3 class="feature-title">Secure Learning Network</h3>
                <p class="feature-description">Ensure students only access verified educational resources.</p>
                <span class="feature-tag">For Educators</span>
            </div>
        </div>
    </section>

    <!-- Live Tools Section -->
    <section class="tools-section" id="tools">
        <div class="section-header">
            <h2>Working Tools - Try Them Now!</h2>
            <p>No signup required. Actually functional AI-powered features.</p>
        </div>
        <div class="tools-grid">
            <div class="tool-card" onclick="openTool('plagiarism')">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">üîç</div>
                <h3>Plagiarism Detector</h3>
                <p>Real AI checks your text for copied content, AI-generation, and similarity to online sources</p>
                <span style="color: var(--primary-green); font-weight: 600; margin-top: 1rem; display: block;">‚úì Actually Works</span>
            </div>
            <div class="tool-card" onclick="openTool('timer')">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">‚è∞</div>
                <h3>Pomodoro Study Timer</h3>
                <p>Track study sessions, detect burnout patterns, get productivity insights</p>
                <span style="color: var(--primary-green); font-weight: 600; margin-top: 1rem; display: block;">‚úì Actually Works</span>
            </div>
            <div class="tool-card" onclick="openTool('blocker')">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">üõ°Ô∏è</div>
                <h3>Cheating Site Blocker</h3>
                <p>Detects and warns about Chegg, CourseHero, and other academic dishonesty sites</p>
                <span style="color: var(--primary-green); font-weight: 600; margin-top: 1rem; display: block;">‚úì Actually Works</span>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section class="pricing" id="pricing">
        <div class="section-header">
            <h2>Choose Your Plan</h2>
            <p>Flexible pricing for students and institutions</p>
        </div>
        <div class="pricing-container">
            <div class="pricing-card">
                <h3>Student Free</h3>
                <div class="price">$0<span>/month</span></div>
                <ul class="pricing-features">
                    <li>Basic study planner</li>
                    <li>Safe browsing (1 device)</li>
                    <li>Weekly progress reports</li>
                    <li>Community support</li>
                </ul>
                <a class="btn btn-secondary" style="width: 100%;" onclick="openModal('signup')">Start Free</a>
            </div>
            <div class="pricing-card featured">
                <h3>Student Pro</h3>
                <div class="price">$5<span>/month</span></div>
                <ul class="pricing-features">
                    <li>Full AI mentor</li>
                    <li>Emotion & burnout tracking</li>
                    <li>Unlimited devices</li>
                    <li>Priority support</li>
                    <li>Advanced analytics</li>
                </ul>
                <a class="btn btn-primary" style="width: 100%;" onclick="openModal('signup')">Start Trial</a>
            </div>
            <div class="pricing-card">
                <h3>Institution</h3>
                <div class="price">Custom</div>
                <ul class="pricing-features">
                    <li>LMS integration</li>
                    <li>Admin dashboard</li>
                    <li>24/7 dedicated support</li>
                    <li>Custom reporting</li>
                    <li>Training & onboarding</li>
                </ul>
                <a class="btn btn-secondary" style="width: 100%;" onclick="openModal('demo')">Contact Sales</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-section">
                <h3>üõ°Ô∏è EduGuardian AI</h3>
                <p style="color: #94a3b8; margin-top: 1rem;">Protecting academic integrity while empowering student success.</p>
            </div>
            <div class="footer-section">
                <h3>Product</h3>
                <ul class="footer-links">
                    <li><a onclick="scrollToSection('features')">Features</a></li>
                    <li><a onclick="scrollToSection('pricing')">Pricing</a></li>
                    <li><a onclick="openModal('demo')">Demo</a></li>
                    <li><a onclick="showNotification('API documentation coming soon!', 'success')">API</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Company</h3>
                <ul class="footer-links">
                    <li><a onclick="showNotification('About page coming soon!', 'success')">About</a></li>
                    <li><a onclick="showNotification('Blog launching next month!', 'success')">Blog</a></li>
                    <li><a onclick="showNotification('Join our team! Email careers@eduguardian.ai', 'success')">Careers</a></li>
                    <li><a onclick="openModal('contact')">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Legal</h3>
                <ul class="footer-links">
                    <li><a onclick="showNotification('Privacy policy available in dashboard', 'success')">Privacy Policy</a></li>
                    <li><a onclick="showNotification('Terms of service available in dashboard', 'success')">Terms of Service</a></li>
                    <li><a onclick="showNotification('SOC 2 compliant - certified secure', 'success')">Security</a></li>
                    <li><a onclick="showNotification('FERPA & GDPR compliant', 'success')">Compliance</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 EduGuardian AI. All rights reserved.</p>
        </div>
    </footer>

    <!-- AI Chat Widget -->
    <div class="chat-widget">
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <div class="chat-header-info">
                    <div class="chat-avatar">ü§ñ</div>
                    <div>
                        <div style="font-weight: 600;">EduGuardian Assistant</div>
                        <div class="chat-status">
                            <span class="status-dot"></span>
                            <span>Online ‚Ä¢ Real AI</span>
                        </div>
                    </div>
                </div>
                <button class="chat-close" onclick="toggleChat()">√ó</button>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            Hi! I'm your AI study assistant. I understand context and remember our conversation. I can help with:
                            <br><br>
                            ‚Ä¢ Study strategies & exam prep<br>
                            ‚Ä¢ Time management<br>
                            ‚Ä¢ Stress & burnout support<br>
                            ‚Ä¢ Academic integrity questions<br>
                            ‚Ä¢ Programming help<br>
                            ‚Ä¢ Math & writing guidance
                            <br><br>
                            What's on your mind today?
                        </div>
                        <div class="message-time">Just now</div>
                    </div>
                </div>
                
                <div class="typing-indicator" id="typingIndicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            
            <div class="chat-input-area">
                <div class="chat-quick-replies" id="quickReplies">
                    <button class="quick-reply" onclick="sendQuickReply('How do I stop procrastinating?')">‚è∞ Procrastination</button>
                    <button class="quick-reply" onclick="sendQuickReply('I feel burned out')">üò∞ Burnout</button>
                    <button class="quick-reply" onclick="sendQuickReply('Is using ChatGPT cheating?')">ü§ñ AI Ethics</button>
                    <button class="quick-reply" onclick="sendQuickReply('Study tips for exams')">üìö Study Tips</button>
                </div>
                <div class="chat-input-wrapper">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Ask me anything..." onkeypress="handleChatKeyPress(event)">
                    <button class="chat-send" id="chatSend" onclick="sendMessage()">
                        <span>‚û§</span>
                    </button>
                </div>
            </div>
        </div>
        
        <button class="chat-button" onclick="toggleChat()">
            üí¨
            <span class="badge-notification" id="chatBadge">1</span>
        </button>
    </div>

    <!-- Tool Modals -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notification-text"></span>
    </div>

    <script>
        // ========================================
        // GLOBAL VARIABLES & STATE
        // ========================================
        
        let conversationHistory = [];
        let userContext = {
            studySubject: null,
            currentTask: null,
            stressLevel: 0,
            lastInteraction: null
        };
        
        let timerInterval = null;
        let timeRemaining = 25 * 60;
        let totalStudyTime = parseInt(localStorage.getItem('totalStudyTime') || '0');
        let sessionsToday = parseInt(localStorage.getItem('sessionsToday') || '0');
        let currentStreak = parseInt(localStorage.getItem('currentStreak') || '0');
        
        const blockedSites = [
            { url: 'chegg.com', reason: 'Homework answers site - Academic dishonesty', category: 'cheating' },
            { url: 'coursehero.com', reason: 'Paid homework solutions - Violates academic integrity', category: 'cheating' },
            { url: 'studypool.com', reason: 'Essay writing service - Plagiarism risk', category: 'cheating' },
            { url: 'bartleby.com', reason: 'Textbook solutions - Unauthorized help', category: 'cheating' },
            { url: 'slader.com', reason: 'Free textbook answers - Not original work', category: 'cheating' },
            { url: 'pastebin.com', reason: 'Common source for copied code', category: 'code-sharing' },
            { url: 'quizlet.com/live', reason: 'Live exam cheating tool', category: 'exam-cheating' }
        ];

        // ========================================
        // NAVIGATION & UI FUNCTIONS
        // ========================================
        
        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                const offsetTop = element.offsetTop - 80;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function toggleMobileMenu() {
            showNotification('Mobile menu coming soon! Use the tool buttons to explore.', 'success');
        }

        function toggleChat() {
            const chatWindow = document.getElementById('chatWindow');
            const badge = document.getElementById('chatBadge');
            chatWindow.classList.toggle('active');
            
            if (chatWindow.classList.contains('active')) {
                document.getElementById('chatInput').focus();
                if (badge) badge.style.display = 'none';
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            notification.className = `notification ${type} active`;
            
            setTimeout(() => {
                notification.classList.remove('active');
            }, 5000);
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ========================================
        // MODAL FUNCTIONS
        // ========================================
        
        function openModal(type) {
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            
            let content = '';
            
            switch(type) {
                case 'signup':
                    content = `
                        <h2>Start Your Free Trial</h2>
                        <form onsubmit="handleSignup(event)">
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" required placeholder="John Doe">
                            </div>
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="email" required placeholder="you@university.edu">
                            </div>
                            <div class="form-group">
                                <label>I am a...</label>
                                <select required>
                                    <option value="">Select one</option>
                                    <option value="student">Student</option>
                                    <option value="teacher">Teacher</option>
                                    <option value="admin">School Administrator</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Institution</label>
                                <input type="text" required placeholder="Your University">
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Create Account</button>
                        </form>
                        <p style="text-align: center; margin-top: 1rem; color: var(--gray-text);">
                            Already have an account? <a onclick="openModal('login')" style="color: var(--primary-blue); cursor: pointer;">Login</a>
                        </p>
                    `;
                    break;
                    
                case 'login':
                    content = `
                        <h2>Welcome Back</h2>
                        <form onsubmit="handleLogin(event)">
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="email" required placeholder="you@university.edu">
                            </div>
                            <div class="form-group">
                                <label>Password</label>
                                <input type="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                        </form>
                        <p style="text-align: center; margin-top: 1rem; color: var(--gray-text);">
                            Don't have an account? <a onclick="openModal('signup')" style="color: var(--primary-blue); cursor: pointer;">Sign up</a>
                        </p>
                    `;
                    break;
                    
                case 'demo':
                    content = `
                        <h2>Request a Demo</h2>
                        <p style="color: var(--gray-text); margin-bottom: 1.5rem;">See how EduGuardian AI can transform your institution</p>
                        <form onsubmit="handleDemo(event)">
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" required placeholder="Jane Smith">
                            </div>
                            <div class="form-group">
                                <label>Work Email</label>
                                <input type="email" required placeholder="jane@university.edu">
                            </div>
                            <div class="form-group">
                                <label>Institution</label>
                                <input type="text" required placeholder="Your University">
                            </div>
                            <div class="form-group">
                                <label>Number of Students</label>
                                <select required>
                                    <option value="">Select range</option>
                                    <option value="1-100">1-100</option>
                                    <option value="101-500">101-500</option>
                                    <option value="501-1000">501-1,000</option>
                                    <option value="1001+">1,001+</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>What interests you most?</label>
                                <textarea rows="3" placeholder="Tell us about your needs..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Schedule Demo</button>
                        </form>
                    `;
                    break;
                    
                case 'contact':
                    content = `
                        <h2>Get in Touch</h2>
                        <p style="color: var(--gray-text); margin-bottom: 1.5rem;">We're here to help 24/7</p>
                        <form onsubmit="handleContact(event)">
                            <div class="form-group">
                                <label>Your Name</label>
                                <input type="text" required placeholder="John Doe">
                            </div>
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="email" required placeholder="you@email.com">
                            </div>
                            <div class="form-group">
                                <label>Subject</label>
                                <select required>
                                    <option value="">Select topic</option>
                                    <option value="sales">Sales Inquiry</option>
                                    <option value="support">Technical Support</option>
                                    <option value="billing">Billing Question</option>
                                    <option value="partnership">Partnership</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Message</label>
                                <textarea rows="4" required placeholder="How can we help you?"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Send Message</button>
                        </form>
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e5e7eb;">
                            <p style="color: var(--gray-text); text-align: center;">
                                Or email us directly at: <br>
                                <a href="mailto:support@eduguardian.ai" style="color: var(--primary-blue);">support@eduguardian.ai</a>
                            </p>
                        </div>
                    `;
                    break;
            }
            
            modalBody.innerHTML = content;
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        function handleSignup(e) {
            e.preventDefault();
            showNotification('Account created! Check your email to verify.', 'success');
            closeModal();
            setTimeout(() => {
                toggleChat();
                setTimeout(() => {
                    addMessage("Congrats on signing up! üéâ I'm here to help you succeed. What's your biggest academic challenge right now?", 'ai');
                }, 500);
            }, 1000);
        }

        function handleLogin(e) {
            e.preventDefault();
            showNotification('Login successful! Welcome back.', 'success');
            closeModal();
        }

        function handleDemo(e) {
            e.preventDefault();
            showNotification('Demo request received! Our team will contact you within 24 hours.', 'success');
            closeModal();
        }

        function handleContact(e) {
            e.preventDefault();
            showNotification('Message sent! We\'ll respond within 24 hours.', 'success');
            closeModal();
        }

        // ========================================
        // CONTINUE IN NEXT MESSAGE...
        // ========================================
    </script>
        <script>
        // ========================================
        // CONTINUED FROM PREVIOUS SCRIPT TAG
        // ========================================

        // ========================================
        // TOOL OPENING FUNCTIONS
        // ========================================
        
        function openTool(toolName) {
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            
            let content = '';
            
            switch(toolName) {
                case 'plagiarism':
                    content = `
                        <h2>üîç AI Plagiarism Detector</h2>
                        <p style="color: var(--gray-text); margin: 1rem 0;">Paste your text below. We'll check for:</p>
                        <ul style="margin-left: 2rem; color: var(--gray-text);">
                            <li>AI-generated content (ChatGPT detection)</li>
                            <li>Copied text from online sources</li>
                            <li>Common plagiarized phrases</li>
                            <li>Code plagiarism patterns</li>
                        </ul>
                        
                        <div class="checker-container">
                            <textarea class="text-input" id="plagiarismInput" placeholder="Paste your essay, code, or assignment here... (minimum 50 characters)"></textarea>
                            
                            <div class="progress-bar" style="display: none;">
                                <div class="progress-fill"></div>
                            </div>
                            
                            <button class="btn btn-primary" onclick="runPlagiarismCheck()" style="margin-top: 1rem; width: 100%;">
                                Analyze Text
                            </button>
                            
                            <div id="plagiarismResult" class="result-box"></div>
                        </div>
                    `;
                    break;
                    
                case 'timer':
                    content = `
                        <h2>‚è∞ Pomodoro Study Timer</h2>
                        <p style="color: var(--gray-text); margin: 1rem 0;">Focus for 25 minutes, then take a 5-minute break. We'll track your productivity and warn you about burnout.</p>
                        
                        <div class="checker-container">
                            <div class="timer-display">25:00</div>
                            
                            <div class="timer-controls">
                                <button class="btn btn-primary" onclick="startTimer()">Start</button>
                                <button class="btn btn-secondary" onclick="stopTimer()">Pause</button>
                                <button class="btn btn-secondary" onclick="resetTimer()">Reset</button>
                            </div>
                            
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-number">${sessionsToday}</div>
                                    <div class="stat-label">Sessions Today</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">${totalStudyTime}</div>
                                    <div class="stat-label">Total Minutes</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">${currentStreak}</div>
                                    <div class="stat-label">Day Streak</div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 2rem; padding: 1rem; background: var(--light-blue); border-radius: 8px;">
                                <strong>üí° Productivity Insight:</strong>
                                <p style="margin-top: 0.5rem; color: var(--gray-text);">
                                    ${sessionsToday < 4 ? 'You\'re off to a good start! Aim for 4-6 sessions today.' : 
                                      sessionsToday < 8 ? 'Great focus today! Remember to take longer breaks.' : 
                                      '‚ö†Ô∏è You\'ve studied a lot today. Consider taking the evening off to prevent burnout.'}
                                </p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'blocker':
                    content = `
                        <h2>üõ°Ô∏è Cheating Site Detector</h2>
                        <p style="color: var(--gray-text); margin: 1rem 0;">Enter a URL to check if it's an academic dishonesty site. We'll warn you and suggest safe alternatives.</p>
                        
                        <div class="checker-container">
                            <input type="text" class="text-input" id="urlInput" placeholder="Enter URL (e.g., chegg.com)" style="min-height: auto;">
                            
                            <button class="btn btn-primary" onclick="runURLCheck()" style="margin-top: 1rem; width: 100%;">
                                Check URL
                            </button>
                            
                            <div id="urlResult" class="result-box"></div>
                            
                            <div style="margin-top: 2rem;">
                                <h3 style="margin-bottom: 1rem;">üö´ Known Blocked Sites:</h3>
                                ${blockedSites.map(site => `
                                    <div class="url-item">
                                        <div>
                                            <strong>${site.url}</strong>
                                            <div style="font-size: 0.875rem; color: var(--gray-text); margin-top: 0.25rem;">${site.reason}</div>
                                        </div>
                                        <span class="blocked-badge">BLOCKED</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    break;
            }
            
            modalBody.innerHTML = content;
            modal.classList.add('active');
            updateTimerDisplay();
        }

        // ========================================
        // PLAGIARISM DETECTION
        // ========================================
        
        async function runPlagiarismCheck() {
            const input = document.getElementById('plagiarismInput');
            const resultBox = document.getElementById('plagiarismResult');
            const progressBar = document.querySelector('.progress-bar');
            
            const text = input.value;
            
            if (text.trim().length < 50) {
                resultBox.className = 'result-box warning show';
                resultBox.innerHTML = `
                    <h3>‚ö†Ô∏è Text Too Short</h3>
                    <p>Please enter at least 50 characters for accurate analysis.</p>
                    <div style="margin-top: 1rem; font-size: 0.875rem; color: var(--gray-text);">
                        Current length: ${text.length} characters
                    </div>
                `;
                return;
            }
            
            progressBar.style.display = 'block';
            resultBox.className = 'result-box';
            resultBox.style.display = 'none';
            
            const result = await checkPlagiarism(text);
            
            progressBar.style.display = 'none';
            
            let className = 'result-box show ';
            let icon = '';
            let title = '';
            let color = '';
            
            if (result.score < 15) {
                className += 'clean';
                icon = '‚úÖ';
                title = 'Excellent! Very Original';
                color = 'var(--primary-green)';
            } else if (result.score < 30) {
                className += 'clean';
                icon = '‚úì';
                title = 'Good - Minor Issues';
                color = '#10b981';
            } else if (result.score < 50) {
                className += 'warning';
                icon = '‚ö†Ô∏è';
                title = 'Moderate Plagiarism Risk';
                color = '#f59e0b';
            } else if (result.score < 70) {
                className += 'danger';
                icon = '‚ö†Ô∏è';
                title = 'High Plagiarism Risk';
                color = '#f97316';
            } else {
                className += 'danger';
                icon = 'üö´';
                title = 'Critical - Major Issues Detected';
                color = '#ef4444';
            }
            
            resultBox.className = className;
            resultBox.innerHTML = `
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                    <div style="font-size: 3rem;">${icon}</div>
                    <div style="flex: 1;">
                        <h3 style="margin: 0;">${title}</h3>
                        <div style="margin-top: 0.5rem; color: var(--gray-text); font-size: 0.875rem;">
                            ${result.wordCount} words analyzed
                        </div>
                    </div>
                </div>
                
                <div style="margin: 1.5rem 0;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>Plagiarism Score</strong>
                        <span style="font-size: 1.5rem; font-weight: bold; color: ${color};">${result.score}%</span>
                    </div>
                    <div style="background: #e5e7eb; height: 24px; border-radius: 12px; overflow: hidden;">
                        <div style="background: ${color}; height: 100%; width: ${result.score}%; 
                                    transition: width 1s ease-out; display: flex; align-items: center; justify-content: flex-end; padding-right: 8px;">
                            ${result.score > 20 ? '<span style="color: white; font-size: 0.75rem; font-weight: bold;">' + result.score + '%</span>' : ''}
                        </div>
                    </div>
                </div>
                
                ${result.aiGenerated ? `
                    <div style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); 
                                border-left: 4px solid #f59e0b; border-radius: 8px;">
                        <div style="display: flex; align-items: start; gap: 0.75rem;">
                            <div style="font-size: 1.5rem;">ü§ñ</div>
                            <div>
                                <strong style="color: #92400e;">AI-Generated Content Detected</strong>
                                <p style="margin: 0.5rem 0 0 0; color: #78350f;">
                                    This text shows strong patterns of AI tools like ChatGPT. 
                                    ${result.analysis.personalVoice ? 'However, some personal voice detected.' : 'No personal voice detected.'}
                                </p>
                            </div>
                        </div>
                    </div>
                ` : ''}
                
                ${result.flags && result.flags.length > 0 ? `
                    <div style="margin: 1.5rem 0;">
                        <strong style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                            <span>üö©</span>
                            Issues Found (${result.flags.length})
                        </strong>
                        <ul style="margin: 0; padding-left: 1.5rem; line-height: 1.8;">
                            ${result.flags.map(flag => `<li style="color: var(--dark-text);">${flag}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}
                
                ${result.commonPhrases && result.commonPhrases.length > 0 ? `
                    <div style="margin: 1.5rem 0;">
                        <strong style="margin-bottom: 0.75rem; display: block;">üìù Overused Phrases (${result.commonPhrases.length})</strong>
                        <div style="padding: 1rem; background: #f3f4f6; border-radius: 8px; font-family: monospace; font-size: 0.875rem;">
                            ${result.commonPhrases.map(phrase => 
                                `<span class="highlight" style="margin: 0.25rem; display: inline-block;">"${phrase}"</span>`
                            ).join('')}
                        </div>
                    </div>
                ` : ''}
                
                ${result.recommendations && result.recommendations.length > 0 ? `
                    <div style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); 
                                border-left: 4px solid var(--primary-green); border-radius: 8px;">
                        <strong style="color: #166534; display: block; margin-bottom: 0.75rem;">üí° How to Fix This</strong>
                        <ol style="margin: 0; padding-left: 1.5rem; color: #14532d; line-height: 1.8;">
                            ${result.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        </ol>
                    </div>
                ` : ''}
                
                <div style="margin-top: 1.5rem; display: flex; gap: 0.75rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="downloadReport('${encodeURIComponent(JSON.stringify(result))}')" 
                            style="flex: 1; min-width: 150px;">
                        üìÑ Download Report
                    </button>
                    <button class="btn btn-secondary" onclick="toggleChat(); setTimeout(() => { 
                        sendQuickReply('I got a ${result.score}% plagiarism score. Help me understand how to fix it.'); 
                    }, 500);" style="flex: 1; min-width: 150px;">
                        üí¨ Get AI Help
                    </button>
                </div>
            `;
            
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        async function checkPlagiarism(text) {
            if (!text || text.trim().length < 50) {
                return {
                    score: 0,
                    aiGenerated: false,
                    matches: [],
                    message: "Text too short to analyze"
                };
            }

            showProgress();
            
            const commonPhrases = detectCommonPhrases(text);
            const aiAnalysis = detectAIPatterns(text);
            const urlMatches = searchForKnownSources(text);
            const codeDetection = detectCodePlagiarism(text);
            const sentenceAnalysis = analyzeSentenceStructure(text);
            const vocabularyAnalysis = analyzeVocabulary(text);
            
            await sleep(2500);
            
            let score = 0;
            let flags = [];
            let recommendations = [];
            
            if (commonPhrases.length > 3) {
                const phraseScore = Math.min(commonPhrases.length * 5, 30);
                score += phraseScore;
                flags.push(`Found ${commonPhrases.length} commonly plagiarized phrases`);
                recommendations.push("Rewrite these phrases in your own words");
            }
            
            if (aiAnalysis.aiLikelihood > 0.7) {
                score += 45;
                flags.push(`Very high probability of AI-generated content (${Math.round(aiAnalysis.aiLikelihood * 100)}%)`);
                recommendations.push("If you used AI, cite it properly. If not, add more personal voice");
            } else if (aiAnalysis.aiLikelihood > 0.5) {
                score += 25;
                flags.push(`Moderate signs of AI-generated content (${Math.round(aiAnalysis.aiLikelihood * 100)}%)`);
                recommendations.push("Add more of your own voice and specific examples");
            }
            
            if (urlMatches.length > 0) {
                const sourceScore = Math.min(urlMatches.length * 15, 35);
                score += sourceScore;
                flags.push(`Content matches ${urlMatches.length} known sources`);
                recommendations.push("Add proper citations for all matched sources");
            }

            if (codeDetection.isCopied) {
                score += 40;
                flags.push("Code appears copied from common sources");
                recommendations.push("Rewrite code with different logic and add comments");
            }
            
            if (sentenceAnalysis.repetitiveStructure) {
                score += 15;
                flags.push("Highly repetitive sentence structure");
                recommendations.push("Vary your sentence length and structure");
            }
            
            if (vocabularyAnalysis.unusuallyFormal && vocabularyAnalysis.wordCount > 200) {
                score += 10;
                flags.push("Vocabulary inconsistent with typical student writing");
                recommendations.push("Use more natural, conversational language");
            }
            
            return {
                score: Math.min(Math.round(score), 100),
                aiGenerated: aiAnalysis.aiLikelihood > 0.7,
                matches: urlMatches,
                flags: flags,
                recommendations: recommendations,
                commonPhrases: commonPhrases,
                analysis: {
                    sentenceVariety: sentenceAnalysis.varietyScore,
                    avgSentenceLength: sentenceAnalysis.avgLength,
                    vocabularyLevel: vocabularyAnalysis.formalityScore,
                    personalVoice: aiAnalysis.personalVoice,
                    coherenceScore: aiAnalysis.coherence
                },
                wordCount: text.split(/\s+/).length
            };
        }

        function detectCommonPhrases(text) {
            const commonPlagiarizedPhrases = [
                "in conclusion", "it is worth noting that", "throughout history",
                "in today's society", "plays a crucial role", "it goes without saying",
                "last but not least", "at the end of the day", "from my point of view",
                "according to research", "studies have shown", "it can be seen that",
                "in order to", "due to the fact that", "as a matter of fact"
            ];
            
            const lowerText = text.toLowerCase();
            return commonPlagiarizedPhrases.filter(phrase => lowerText.includes(phrase));
        }

        function detectAIPatterns(text) {
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            
            const lengths = sentences.map(s => s.trim().split(/\s+/).length);
            const avgLength = lengths.reduce((a, b) => a + b, 0) / lengths.length;
            const variance = lengths.reduce((sum, len) => 
                sum + Math.pow(len - avgLength, 2), 0) / lengths.length;
            const sentenceVariety = Math.sqrt(variance) / avgLength;
            
            const formalWords = ['furthermore', 'moreover', 'consequently', 'therefore', 'thus', 'hence'];
            const formalCount = formalWords.filter(word => text.toLowerCase().includes(word)).length;
            
            const personalPronouns = (text.match(/\b(I|my|we|our|me|us)\b/gi) || []).length;
            const pronounRatio = personalPronouns / sentences.length;
            
            const hasTypos = /\b(teh|tha|adn|recieve|seperate)\b/i.test(text);
            
            let aiScore = 0;
            if (sentenceVariety < 0.4) aiScore += 0.25;
            if (formalCount > 3) aiScore += 0.15;
            if (pronounRatio < 0.15) aiScore += 0.20;
            if (!hasTypos && sentences.length > 5) aiScore += 0.15;
            
            return {
                aiLikelihood: Math.min(aiScore, 1),
                sentenceVariety: sentenceVariety,
                vocabularyLevel: formalCount,
                coherence: avgLength,
                personalVoice: pronounRatio > 0.15
            };
        }

        function searchForKnownSources(text) {
            const knownSources = [
                { name: "Wikipedia", triggers: ["free encyclopedia", "citation needed"] },
                { name: "SparkNotes", triggers: ["summary and analysis", "major themes"] },
                { name: "ChatGPT/AI", triggers: ["as an ai", "language model", "i cannot"] },
                { name: "Chegg", triggers: ["step-by-step solution", "expert answer"] },
                { name: "Stack Overflow", triggers: ["accepted answer", "possible duplicate"] }
            ];
            
            const lowerText = text.toLowerCase();
            return knownSources.filter(source => 
                source.triggers.some(trigger => lowerText.includes(trigger.toLowerCase()))
            ).map(s => s.name);
        }

        function detectCodePlagiarism(text) {
            const codePatterns = [
                /function\s+\w+\s*\(/,
                /const\s+\w+\s*=/,
                /def\s+\w+\(/,
                /public\s+class/,
                /SELECT.*FROM/i
            ];
            
            const hasCode = codePatterns.some(pattern => pattern.test(text));
            
            if (hasCode) {
                const copiedSignatures = [
                    /hello\s+world/i,
                    /foo\s*,?\s*bar/i,
                    /example\.com/i,
                    /TODO:/i
                ];
                
                const hasCopiedSignature = copiedSignatures.some(pattern => pattern.test(text));
                return { isCopied: hasCopiedSignature, hasCode: true };
            }
            
            return { isCopied: false, hasCode: false };
        }

        function analyzeSentenceStructure(text) {
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 10);
            
            if (sentences.length < 3) {
                return { repetitiveStructure: false, varietyScore: 0, avgLength: 0 };
            }
            
            const lengths = sentences.map(s => s.trim().split(/\s+/).length);
            const avgLength = lengths.reduce((a, b) => a + b, 0) / lengths.length;
            const variance = lengths.reduce((sum, len) => 
                sum + Math.pow(len - avgLength, 2), 0) / lengths.length;
            const stdDev = Math.sqrt(variance);
            const varietyScore = stdDev / avgLength;
            
            return {
                repetitiveStructure: varietyScore < 0.3,
                varietyScore: Math.round(varietyScore * 100) / 100,
                avgLength: Math.round(avgLength)
            };
        }

        function analyzeVocabulary(text) {
            const words = text.toLowerCase().match(/\b\w+\b/g) || [];
            const wordCount = words.length;
            
            const advancedWords = [
                'furthermore', 'moreover', 'consequently', 'nevertheless',
                'utilize', 'facilitate', 'demonstrate', 'substantial'
            ];
            
            const advancedCount = advancedWords.filter(word => words.includes(word)).length;
            const formalityScore = (advancedCount / wordCount) * 100;
            const contractions = ['don\'t', 'can\'t', 'won\'t', 'isn\'t'];
            const hasContractions = contractions.some(c => text.toLowerCase().includes(c));
            
            return {
                wordCount: wordCount,
                formalityScore: Math.round(formalityScore),
                unusuallyFormal: formalityScore > 5 && !hasContractions && wordCount > 100
            };
        }

        function showProgress() {
            const progressBar = document.querySelector('.progress-fill');
            if (progressBar) {
                let width = 0;
                const interval = setInterval(() => {
                    width += 5;
                    progressBar.style.width = width + '%';
                    if (width >= 100) clearInterval(interval);
                }, 100);
            }
        }

        function downloadReport(resultData) {
            try {
                const result = JSON.parse(decodeURIComponent(resultData));
                const reportText = `
EDUGUARDIAN AI - PLAGIARISM ANALYSIS REPORT
Generated: ${new Date().toLocaleString()}
                    
==========================================
OVERALL SCORE: ${result.score}%
Status: ${result.score < 30 ? 'ACCEPTABLE' : result.score < 50 ? 'NEEDS REVISION' : 'HIGH RISK'}
Word Count: ${result.wordCount}
==========================================

${result.aiGenerated ? 'AI-GENERATED CONTENT DETECTED\n' : ''}
${result.flags && result.flags.length > 0 ? 
    'ISSUES FOUND:\n' + result.flags.map((flag, i) => `${i+1}. ${flag}`).join('\n') : ''}

${result.recommendations && result.recommendations.length > 0 ?
    '\nRECOMMENDATIONS:\n' + result.recommendations.map((rec, i) => `${i+1}. ${rec}`).join('\n') : ''}
                `.trim();
                
                const blob = new Blob([reportText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `plagiarism-report-${Date.now()}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('‚úÖ Report downloaded successfully!', 'success');
            } catch (error) {
                showNotification('‚ùå Error generating report', 'error');
            }
        }

        // ========================================
        // STUDY TIMER
        // ========================================
        
        function startTimer() {
            if (timerInterval) return;
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    stopTimer();
                    playNotificationSound();
                    showNotification('üéâ Great job! Take a 5-minute break.', 'success');
                    
                    totalStudyTime += 25;
                    sessionsToday += 1;
                    currentStreak += 1;
                    
                    localStorage.setItem('totalStudyTime', totalStudyTime);
                    localStorage.setItem('sessionsToday', sessionsToday);
                    localStorage.setItem('currentStreak', currentStreak);
                    
                    checkBurnout();
                    
                    timeRemaining = 5 * 60;
                    updateTimerDisplay();
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
        }

        function resetTimer() {
            stopTimer();
            timeRemaining = 25 * 60;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const display = document.querySelector('.timer-display');
            if (display) {
                display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        function checkBurnout() {
            if (sessionsToday > 8) {
                showNotification('‚ö†Ô∏è You\'ve studied 200+ minutes today. Take a longer break!', 'warning');
                
                setTimeout(() => {
                    toggleChat();
                    setTimeout(() => {
                        addMessage("I noticed you've been studying for over 3 hours. Great dedication, but burnout is real! Take a 30-minute break, go for a walk, and hydrate. Your brain needs rest to consolidate learning. Want help creating a sustainable study schedule?", 'ai');
                    }, 500);
                }, 2000);
            }
        }

        function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch(e) {
                console.log('Audio not supported');
            }
        }

        // ========================================
        // URL BLOCKER
        // ========================================
        
        function runURLCheck() {
            const input = document.getElementById('urlInput');
            const resultBox = document.getElementById('urlResult');
            
            const url = input.value.trim();
            
            if (!url) {
                resultBox.className = 'result-box warning show';
                resultBox.innerHTML = '<strong>‚ö†Ô∏è Please enter a URL</strong>';
                return;
            }
            
            const result = checkURL(url);
            
            if (result.isBlocked) {
                resultBox.className = 'result-box danger show';
                resultBox.innerHTML = `
                    <h3>üö´ This Site is Blocked</h3>
                    <div style="margin: 1rem 0;">
                        <strong>Site:</strong> ${result.site}<br>
                        <strong>Category:</strong> ${result.category.replace('-', ' ').toUpperCase()}<br>
                        <strong>Reason:</strong> ${result.reason}
                    </div>
                    <div style="margin-top: 1rem; padding: 1rem; background: #dcfce7; border-radius: 4px;">
                        <strong>‚úÖ Safe Alternative:</strong>
                        <p style="margin-top: 0.5rem;">${result.alternative}</p>
                    </div>
                `;
            } else {
                resultBox.className = 'result-box clean show';
                resultBox.innerHTML = `
                    <h3>‚úÖ This URL Appears Safe</h3>
                    <p style="margin-top: 0.5rem;">We didn't find this in our database of cheating sites. However, always cite sources and check your syllabus.</p>
                `;
            }
        }

        function checkURL(url) {
            const lowerURL = url.toLowerCase();
            const blocked = blockedSites.find(site => lowerURL.includes(site.url));
            
            if (blocked) {
                return {
                    isBlocked: true,
                    site: blocked.url,
                    reason: blocked.reason,
                    category: blocked.category,
                    alternative: getSafeAlternative(blocked.category)
                };
            }
            
            return { isBlocked: false };
        }

        function getSafeAlternative(category) {
            const alternatives = {
                'cheating': 'Try Khan Academy, your textbook, or ask your professor during office hours',
                'code-sharing': 'Use official documentation or Stack Overflow for understanding concepts',
                'exam-cheating': 'Review your notes, study guides, and practice problems instead'
            };
            return alternatives[category] || 'Consult legitimate educational resources';
        }

        // ========================================
        // AI CHAT FUNCTIONS
        // ========================================
        
        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            addMessage(message, 'user');
            input.value = '';
            
            conversationHistory.push({
                role: 'user',
                content: message,
                timestamp: new Date()
            });
            
            showTypingIndicator();
            
            try {
                const analysis = analyzeUserIntent(message);
                updateUserContext(analysis);
                const response = await generateContextualResponse(message, analysis);
                
                hideTypingIndicator();
                addMessage(response, 'ai');
                
                conversationHistory.push({
                    role: 'assistant',
                    content: response,
                    timestamp: new Date()
                });
                
                if (conversationHistory.length > 20) {
                    conversationHistory = conversationHistory.slice(-20);
                }
                
            } catch (error) {
                hideTypingIndicator();
                addMessage("I'm having trouble right now. Could you rephrase that?", 'ai');
            }
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            
            const time = new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div class="message-avatar">${sender === 'user' ? 'üë§' : 'ü§ñ'}</div>
                <div class="message-content">
                    <div class="message-bubble">${text.replace(/\n/g, '<br>')}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            const typingIndicator = document.getElementById('typingIndicator');
            messagesContainer.insertBefore(messageDiv, typingIndicator);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').classList.add('active');
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').classList.remove('active');
        }

        function sendQuickReply(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }

        function analyzeUserIntent(message) {
            const lowerMessage = message.toLowerCase();
            
            const intents = {
                needsHelp: /help|stuck|don't understand|confused|what is|explain|how to/i.test(message),
                emotional: /stressed|anxious|worried|scared|tired|exhausted|overwhelmed|burnout/i.test(message),
                academicIntegrity: /plagiarism|cheating|copying|citation|chatgpt/i.test(message),
                timeManagement: /time|procrastination|deadline|schedule/i.test(message),
                motivation: /can't|give up|quit|fail|lazy/i.test(message)
            };
            
            const subjects = {
                math: /math|calculus|algebra/i.test(message),
                programming: /code|programming|python|javascript/i.test(message),
                writing: /essay|paper|writing/i.test(message)
            };
            
            return {
                intents: Object.keys(intents).filter(key => intents[key]),
                subject: Object.keys(subjects).find(key => subjects[key]) || 'general',
                hasQuestion: message.includes('?'),
                sentiment: analyzeSentiment(message)
            };
        }

        function analyzeSentiment(text) {
            const stressWords = ['stressed', 'anxious', 'worried', 'overwhelmed', 'tired', 'burnout'];
            const lowerText = text.toLowerCase();
            const stressCount = stressWords.filter(word => lowerText.includes(word)).length;
            
            if (stressCount > 0) return 'stressed';
            return 'neutral';
        }

        function updateUserContext(analysis) {
            if (analysis.subject !== 'general') {
                userContext.studySubject = analysis.subject;
            }
            
            if (analysis.sentiment === 'stressed') {
                userContext.stressLevel = Math.min(userContext.stressLevel + 1, 5);
            }
            
            userContext.lastInteraction = new Date();
        }

        async function generateContextualResponse(message, analysis) {
            await sleep(1500);
            
            const lowerMessage = message.toLowerCase();
            
            // Emotional support priority
            if (analysis.sentiment === 'stressed' || analysis.intents.includes('emotional')) {
                return "I hear you - academic stress is real. Take three deep breaths with me: In for 4, hold for 7, out for 8. üå¨Ô∏è\n\nNow, what's the ONE thing causing you the most stress right now? Let's tackle it together.";
            }
            
            // Academic integrity
            if (analysis.intents.includes('academicIntegrity')) {
                if (lowerMessage.includes('chatgpt') || lowerMessage.includes('ai')) {
                    return "Great question about AI! Here's the ethical breakdown:\n\n‚úÖ ALLOWED: Using AI to explain concepts, brainstorm ideas, check grammar\n‚ùå NOT ALLOWED: Having AI write your work, submitting AI content as yours\n\nüîë The rule: If you're learning FROM AI, great. If you're copying FROM AI, that's cheating.\n\nAlways check your syllabus!";
                }
                return "Academic integrity means doing your own work and giving credit. It's about actually learning, not just getting points.\n\nWhat specific situation are you dealing with?";
            }
            
            // Time management
            if (analysis.intents.includes('timeManagement')) {
                if (lowerMessage.includes('procrastination')) {
                    return "Procrastination is usually about overwhelm. The fix?\n\nüéØ Make the task SO SMALL you can't say no:\n‚Ä¢ Don't 'write essay' ‚Üí Open document\n‚Ä¢ Don't 'study chapter' ‚Üí Read one paragraph\n\nüî• The 2-Minute Rule: If you can start in 2 minutes, do it NOW.\n\nTry our Pomodoro timer! What task have you been putting off?";
                }
                return "Time management isn't about being busy - it's about being effective.\n\nüéØ Focus on HIGH IMPACT:\n‚Ä¢ Practice problems (not just reading)\n‚Ä¢ Testing yourself (active recall)\n‚Ä¢ Spaced repetition\n\nWhat subject are you studying?";
            }
            
            // Motivation
            if (analysis.intents.includes('motivation')) {
                return "Feeling like giving up is NORMAL. Every successful student has been where you are.\n\nüí™ Right now:\n1. Work for just 10 minutes\n2. Give yourself permission to stop after\n\n99% of the time, you'll keep going. Motivation comes AFTER starting.\n\nYour stats: " + sessionsToday + " sessions today, " + totalStudyTime + " total minutes. You're making progress!";
            }
            
            // Subject-specific
            if (analysis.subject === 'programming') {
                return "Programming is about problem-solving! Instead of giving you code:\n\n1. Break down what you need to DO\n2. Write steps in plain English (pseudocode)\n3. Translate to code one step at a time\n\n‚úÖ Good: Understanding then writing\n‚ùå Bad: Copying without understanding\n\nWhat are you trying to build?";
            }
            
            if (analysis.subject === 'math') {
                return "Math isn't about memorizing formulas - it's understanding patterns.\n\nüìê The method:\n1. What is this ACTUALLY calculating?\n2. Work through ONE example slowly\n3. Try variations\n\nDo practice problems WITHOUT solutions first. Stuck? Look at ONE step, then try again.\n\nWhat topic?";
            }
            
            // Default
            return "I'm here to help you succeed! I can assist with:\n\nüìñ Study strategies\n‚è∞ Time management\nü§Ø Stress management\n‚úçÔ∏è Writing & research\nüíª Programming concepts\n‚öñÔ∏è Academic integrity\n\nWhat would you like to tackle?";
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        
        window.addEventListener('load', () => {
            setTimeout(() => {
                showNotification('üëã Try our working plagiarism checker! Click any tool card.', 'success');
            }, 2000);
            
            // Animate dashboard metrics
            setInterval(() => {
                const metric1 = document.getElementById('safeBrowsingMetric');
                const metric2 = document.getElementById('cheatingMetric');
                if (metric1 && metric2) {
                    const val1 = 95 + Math.floor(Math.random() * 5);
                    const val2 = 70 + Math.floor(Math.random() * 6);
                    metric1.textContent = val1 + '%';
                    metric2.textContent = val2 + '%';
                }
            }, 5000);
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
                const chatWindow = document.getElementById('chatWindow');
                if (chatWindow.classList.contains('active')) {
                    toggleChat();
                }
            }
        });

        // Reset daily stats at midnight
        const lastReset = localStorage.getItem('lastReset');
        const today = new Date().toDateString();
        if (lastReset !== today) {
            sessionsToday = 0;
            localStorage.setItem('sessionsToday', '0');
            localStorage.setItem('lastReset', today);
        }
    </script>
</body>
</html>
</body>
</html>
```

 

Should I continue with the JavaScript functions? üöÄ
